<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
<head th:replace="~{fragments/commons::head}">
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<header th:replace="~{fragments/commons::header-nav}"></header>

<div class="container bg-white-opacity-90 p-5 rounded-4">
    <h3 class="text-center">Add Recipe:</h3>
    <form th:action="@{/recipes/add}"
          th:method="post"
          th:object="${recipeAddData}"
    >
        <div class="mb-3">
            <label for="inputName"
                   class="form-label h5"
            >
                Name
            </label>
            <input th:field="*{name}"
                   name="username"
                   required minlength="5" maxlength="30"
                   type="text"
                   id="inputName"
                   class="form-control"
                   th:errorclass="'bg-danger is-invalid'"
            >
            <small th:errors="*{name}"
                   id="nameError"
                   class="invalid-feedback bg-danger rounded text-dark"
            >
                Name must be between 5 and 30 characters!
            </small>
        </div>

        <div class="mb-3">
            <label for="mealType"
                   class="form-label h5"
            >
                Meal Type
            </label>
            <select th:field="*{mealType}"
                    name="mealType"
                    required
                    id="mealType"
                    class="form-select"
                    th:errorclass="'bg-danger is-invalid'"
            >
                <option value="" selected>Select type</option>
                <option th:each="type : ${mealTypes}"
                        th:value="${type.name()}"
                        th:text="${#strings.capitalize(#strings.toLowerCase(type))}"
                >
                    Please select:
                </option>

            </select>
            <small th:errors="*{mealType}"
                   id="mealTypeError"
                   class="invalid-feedback bg-danger rounded text-dark"
            >
                Must select a valid meal type!
            </small>
        </div>

        <!--        TODO: ingredients: use js for selection and adding   -->
        <div class="mb-3">
            <label for="ingredients"
                   class="form-label h5"
            >
                Ingredients
            </label>
            <select th:field="*{mealType}"
                    name="ingredients"
                    required
                    id="ingredients"
                    class="form-select"
                    th:errorclass="'bg-danger is-invalid'"
            >
                <option value="" selected>Select type</option>
                <option th:each="type : ${mealTypes}"
                        th:value="${type.name()}"
                        th:text="${#strings.capitalize(#strings.toLowerCase(type))}"
                >
                    Please select:
                </option>

            </select>
            <small th:errors="*{mealType}"
                   id="ingredientsError"
                   class="invalid-feedback bg-danger rounded text-dark"
            >
                Must select a valid meal type!
            </small>
        </div>

        <div class="mb-3">
            <label for="inputInstructions"
                   class="form-label h5"
            >
                Instructions:
            </label>
            <textarea th:field="*{instructions}"
                      name="instructions"
                      required minlength="50"
                      rows="6"
                      type="textarea"
                      id="inputInstructions"
                      class="form-control"
                      th:errorclass="'bg-danger is-invalid'"
            >
            </textarea>
            <small th:errors="*{instructions}"
                   id="instructionsError"
                   class="invalid-feedback bg-danger rounded text-dark"
            >
                Instructions should be at least 50 characters long!
            </small>
        </div>

        <div class="mb-3">
            <label for="diets"
                   class="form-label h5"
            >
                Dietary Types
            </label>
            <br>
            <div class="me-3 form-check-inline" th:each="diet : ${dietsData}">
                <input name="diets"
                       id="diets"
                       class="form-check-inline me-2"
                       type="checkbox"
                       th:field="*{diets}"
                       th:value="${diet.id}"
                       th:text="${diet.type}"
                       th:errorclass="'bg-danger is-invalid'"
                >
            </div>
            <small th:errors="*{mealType}"
                   id="dietsError"
                   class="invalid-feedback bg-danger rounded text-dark"
            >
                Invalid dietary type or types!
            </small>
        </div>

        <div class="d-flex mt-5 justify-content-center">
            <button type="submit"
                    class="btn btn-primary w-50"
            >
                Add Recipe
            </button>
        </div>

    </form>
</div>

</body>
</html>